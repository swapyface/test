from pylint import config, lint

def run_pylint(module_or_file):
    """Runs Pylint and returns the report and stats."""

    args = [module_or_file]

    # Initialize Pylint's configuration (important!)
    config.initialize()

    # Run Pylint
    (stdout, stderr) = lint.Run(args, do_exit=False)

    # Get the report
    report = stdout.getvalue()

    # Access statistics (this is the correct way now)
    stats = lint.stats

    return report, stats


# Example usage:
module_or_file_to_check = "my_module.py"
report, stats = run_pylint(module_or_file_to_check)

print(report)
print(stats)

# Example: Accessing specific statistics
print(f"Global score: {stats.global_module}")  # Example statistic

# ... (process report and stats)
